<!DOCTYPE html>
<html th:fragment="layout(title, links, content)" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<base th:href="@{/}"><!-- popuni href atribut vrednošću context path-a -->
	<script src="webjars/jquery/3.2.1/jquery.min.js"></script>
	<script src="webjars/jquery-ui/1.12.1/jquery-ui.min.js"></script>
	<script src="js/lokacijaJS.js"></script>
	<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
	<link rel="stylesheet" href="webjars/jquery-ui/1.12.1/jquery-ui.min.css"/>
	<link rel="stylesheet" type="text/css" href="css/basePage.css"/>
	<link rel="stylesheet" type="text/css" href="css/StiloviKorisnik.css"/>
	<link rel="stylesheet" type="text/css" href="css/StiloviHorizontalniMeni.css"/>
	<!-- naslov -->
	<title th:replace="${title}"></title>
	<!-- blok za dodatne linkove -->
    <th:block th:replace="${links}" />
</head>
<body>
	<header class="zaglavlje">
		<span th:text="${#locale}"></span>
		<span th:text="#{lang.change}"></span>:
		<select id="locales" name="locales" th:with="jezik=${#locale.language}">
		    <option value=""></option>
		    <option value="en" th:text="#{lang.eng}" th:selected="${#strings.equals(jezik,'en')}"></option>
		    <option value="sr" th:text="#{lang.sr}" th:selected="${#strings.equals(jezik,'sr')}"></option>
		</select>
	</header>
	
	<h2>Teretana</h2>
	<ul>
		<li><a href="">početna</a></li>
	</ul>
	<table class="korisnik" th:unless="${session.prijavljeniKorisnik == null}">
		<tr><th>Prijavljeni ste kao</th><td><a th:href="|Korisnici/Details?korisnickoIme=${session.prijavljeniKorisnik.korisnickoIme}|" th:text="${session.prijavljeniKorisnik.korisnickoIme}"></a>.</td></tr>
		<tr>
			<td colspan="2">
				<ul>
					<li><a href="Korisnici/Logout">odjava</a></li>
				</ul>
			</td>
		</tr>
	</table>
	<table class="korisnik" th:if="${session.prijavljeniKorisnik == null}">
		<tr><th>Niste prijavljeni</th></tr>
		<tr>
			<td>
				<ul>
					<li><a href="registracija.html">registracija</a></li>
					<li><a href="prijava.html">prijava</a></li>
				</ul>
			</td>
		</tr>
	</table>
	<ul>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="Treninzi">treninzi</a></li>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="TipoviTreninga">tipoviTreninga</a></li>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="Termini">termini</a></li>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="ClanskeKarte">clanskeKarte</a></li>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="Komentari">komentari</a></li>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="TreninziKorpa">zakazivanje treninga</a></li>
		<li th:if="${session.prijavljeniKorisnik != null}"><a href="Tabele">tabelarni pregled treninga</a></li>
		<li th:if="${session.prijavljeniKorisnik != null and session.prijavljeniKorisnik.administrator}"><a href="Korisnici">korisnici</a></li>
		<li th:if="${session.prijavljeniKorisnik != null and session.prijavljeniKorisnik.administrator}"><a href="Sale">sale</a></li>
		<li th:if="${session.prijavljeniKorisnik != null and session.prijavljeniKorisnik.administrator}"><a href="Izvestaji">izvestaji</a></li>
		<li th:if="${session.prijavljeniKorisnik != null and session.prijavljeniKorisnik.administrator}"><a href="Popust">specijalni datumi</a></li>
	</ul>
	
	<div th:replace="${content}"></div>
	
	<table class="horizontalni-meni" th:unless="${#servletContext.getAttribute('statistikaTreninga').empty}">
		<caption>Popularni treninzi</caption>
		<tr>
			<td>
				<ul>
					<li th:each="itBrojac: ${#servletContext.getAttribute('statistikaTreninga').treninzi}">
						<a th:href="|Treninzi/Details?id=${itBrojac.trening.id}|" th:text="${itBrojac.trening.naziv}"></a>
						<progress th:value="${itBrojac.brojac}" th:max="${#servletContext.getAttribute('statistikaTreninga').max}"></progress>
						<span th:text="${itBrojac.brojac}"></span>
					</li>
				</ul>
			</td>
		</tr>
	</table>
	<table class="horizontalni-meni" th:unless="${session.poseceniTreninziZaKorisnika.empty}">
		<caption>Poseceni treninzi</caption>
		<tr>
			<td>
				<ul>
					<li th:each="itTrening: ${session.poseceniTreninziZaKorisnika}"><a th:href="|Treninzi/Details?id=${itTrening.id}|" th:text="${itTrening.naziv}"></a></li>
				</ul>
			</td>
		</tr>
	</table>

</body>
</html>